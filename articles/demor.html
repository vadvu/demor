<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="demor">
<title>demor • demor</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="demor">
<meta property="og:description" content="demor">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">demor</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.95</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/demor.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>demor</h1>
            
      
      
      <div class="d-none name"><code>demor.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://vadvu.github.io/demor/">demor</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="get-rosbris-data">Get ROSBRIS data<a class="anchor" aria-label="anchor" href="#get-rosbris-data"></a>
</h2>
<p>For getting data from <a href="http://demogr.nes.ru/index.php/ru/demogr_indicat/data" class="external-link">RosBris</a>
there is a function <code><a href="../reference/get_rosbris.html">get_rosbris()</a></code> that can download data on
mortality/fertility by 1/5-year age groups from 1989 to the last
available year (in 2023 its 2022).<br>
Worth noting: downloading and preparing the final file can get some
time.<br>
In the chunk below mortality data for 5-age groups with population in
“long” format is loading. For more function description use
<code><a href="../reference/get_rosbris.html">?get_rosbris</a></code></p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://vadvu.github.io/demor/">demor</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">dbm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_rosbris.html">get_rosbris</a></span><span class="op">(</span></span>
<span>  <span class="co">#mortality data</span></span>
<span>  type <span class="op">=</span> <span class="st">"m"</span>,</span>
<span>  <span class="co">#what age group download</span></span>
<span>  age <span class="op">=</span>  <span class="fl">5</span>,</span>
<span>  <span class="co">#to get "long" data</span></span>
<span>  initial <span class="op">=</span> <span class="cn">F</span>,</span>
<span>  <span class="co">#last available year (the name of the downloading file contains years, so for the downloading the last year is required)</span></span>
<span>  lastyear <span class="op">=</span> <span class="fl">2022</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Lets see the data for Russia in 2010 for males and for total
population (both urban and rural)</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dbm</span><span class="op">[</span><span class="va">dbm</span><span class="op">$</span><span class="va">year</span><span class="op">==</span><span class="fl">2010</span> <span class="op">&amp;</span> <span class="va">dbm</span><span class="op">$</span><span class="va">code</span><span class="op">==</span><span class="fl">1100</span> <span class="op">&amp;</span> <span class="va">dbm</span><span class="op">$</span><span class="va">sex</span><span class="op">==</span><span class="st">"m"</span> <span class="op">&amp;</span> <span class="va">dbm</span><span class="op">$</span><span class="va">territory</span><span class="op">==</span><span class="st">"t"</span>,<span class="op">]</span></span>
<span><span class="co">#&gt;       year code territory sex age       mx       N        Dx</span></span>
<span><span class="co">#&gt; 20445 2010 1100         t   m   0 0.008823  869388   7670.61</span></span>
<span><span class="co">#&gt; 20446 2010 1100         t   m   1 0.000604 3222450   1946.36</span></span>
<span><span class="co">#&gt; 20447 2010 1100         t   m   5 0.000355 3613276   1282.71</span></span>
<span><span class="co">#&gt; 20448 2010 1100         t   m  10 0.000387 3398894   1315.37</span></span>
<span><span class="co">#&gt; 20449 2010 1100         t   m  15 0.001186 4353344   5163.07</span></span>
<span><span class="co">#&gt; 20450 2010 1100         t   m  20 0.002546 6193325  15768.21</span></span>
<span><span class="co">#&gt; 20451 2010 1100         t   m  25 0.004491 6002262  26956.16</span></span>
<span><span class="co">#&gt; 20452 2010 1100         t   m  30 0.006808 5395865  36735.05</span></span>
<span><span class="co">#&gt; 20453 2010 1100         t   m  35 0.007934 4973298  39458.15</span></span>
<span><span class="co">#&gt; 20454 2010 1100         t   m  40 0.009782 4464789  43674.57</span></span>
<span><span class="co">#&gt; 20455 2010 1100         t   m  45 0.013354 5140274  68643.22</span></span>
<span><span class="co">#&gt; 20456 2010 1100         t   m  50 0.018567 5207919  96695.43</span></span>
<span><span class="co">#&gt; 20457 2010 1100         t   m  55 0.026250 4333619 113757.50</span></span>
<span><span class="co">#&gt; 20458 2010 1100         t   m  60 0.037143 3117320 115786.62</span></span>
<span><span class="co">#&gt; 20459 2010 1100         t   m  65 0.049925 1573662  78565.08</span></span>
<span><span class="co">#&gt; 20460 2010 1100         t   m  70 0.068599 2149929 147482.98</span></span>
<span><span class="co">#&gt; 20461 2010 1100         t   m  75 0.097635 1077916 105242.33</span></span>
<span><span class="co">#&gt; 20462 2010 1100         t   m  80 0.138043  714191  98589.07</span></span>
<span><span class="co">#&gt; 20463 2010 1100         t   m  85 0.198593  231350  45944.49</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="mortality">Mortality<a class="anchor" aria-label="anchor" href="#mortality"></a>
</h2>
<div class="section level3">
<h3 id="life-table">Life table<a class="anchor" aria-label="anchor" href="#life-table"></a>
</h3>
<p>Now one can create <em>life table</em> based on gotten data for
2010-Russia using <code><a href="../reference/LT.html">LT()</a></code>.<br>
Note, <span class="math inline">\(a_x\)</span> for age 0 is modeled as
in Andreev &amp; Kingkade (<a href="https://doi.org/10.4054/DemRes.2015.33.13" class="external-link">2015</a>).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rus2010</span> <span class="op">&lt;-</span> <span class="va">dbm</span><span class="op">[</span><span class="va">dbm</span><span class="op">$</span><span class="va">year</span><span class="op">==</span><span class="fl">2010</span> <span class="op">&amp;</span> <span class="va">dbm</span><span class="op">$</span><span class="va">code</span><span class="op">==</span><span class="fl">1100</span> <span class="op">&amp;</span> <span class="va">dbm</span><span class="op">$</span><span class="va">sex</span><span class="op">==</span><span class="st">"m"</span> <span class="op">&amp;</span> <span class="va">dbm</span><span class="op">$</span><span class="va">territory</span><span class="op">==</span><span class="st">"t"</span>,<span class="op">]</span></span>
<span></span>
<span><span class="fu"><a href="../reference/LT.html">LT</a></span><span class="op">(</span></span>
<span>  age <span class="op">=</span> <span class="va">rus2010</span><span class="op">$</span><span class="va">age</span>, </span>
<span>  sex <span class="op">=</span> <span class="st">"m"</span>, </span>
<span>  <span class="co">#age specific mortality rates</span></span>
<span>  mx <span class="op">=</span> <span class="va">rus2010</span><span class="op">$</span><span class="va">mx</span><span class="op">)</span></span>
<span><span class="co">#&gt;       age      mx    ax      qx      lx      dx      Lx       Tx    ex</span></span>
<span><span class="co">#&gt;  [1,]   0 0.00882 0.132 0.00876 1.00000 0.00876 0.99240 63.03477 63.03</span></span>
<span><span class="co">#&gt;  [2,]   1 0.00060 0.500 0.00241 0.99124 0.00239 3.96019 62.04238 62.59</span></span>
<span><span class="co">#&gt;  [3,]   5 0.00036 0.500 0.00177 0.98885 0.00175 4.93988 58.08218 58.74</span></span>
<span><span class="co">#&gt;  [4,]  10 0.00039 0.500 0.00193 0.98710 0.00191 4.93072 53.14231 53.84</span></span>
<span><span class="co">#&gt;  [5,]  15 0.00119 0.500 0.00591 0.98519 0.00582 4.91139 48.21159 48.94</span></span>
<span><span class="co">#&gt;  [6,]  20 0.00255 0.500 0.01265 0.97937 0.01239 4.86586 43.30020 44.21</span></span>
<span><span class="co">#&gt;  [7,]  25 0.00449 0.500 0.02221 0.96698 0.02147 4.78120 38.43434 39.75</span></span>
<span><span class="co">#&gt;  [8,]  30 0.00681 0.500 0.03347 0.94550 0.03165 4.64841 33.65314 35.59</span></span>
<span><span class="co">#&gt;  [9,]  35 0.00793 0.500 0.03890 0.91386 0.03555 4.48042 29.00473 31.74</span></span>
<span><span class="co">#&gt; [10,]  40 0.00978 0.500 0.04774 0.87831 0.04193 4.28672 24.52431 27.92</span></span>
<span><span class="co">#&gt; [11,]  45 0.01335 0.500 0.06461 0.83638 0.05404 4.04679 20.23759 24.20</span></span>
<span><span class="co">#&gt; [12,]  50 0.01857 0.500 0.08872 0.78234 0.06941 3.73817 16.19080 20.70</span></span>
<span><span class="co">#&gt; [13,]  55 0.02625 0.500 0.12317 0.71293 0.08781 3.34513 12.45263 17.47</span></span>
<span><span class="co">#&gt; [14,]  60 0.03714 0.500 0.16994 0.62512 0.10623 2.86003  9.10751 14.57</span></span>
<span><span class="co">#&gt; [15,]  65 0.04992 0.500 0.22193 0.51889 0.11516 2.30657  6.24748 12.04</span></span>
<span><span class="co">#&gt; [16,]  70 0.06860 0.500 0.29278 0.40374 0.11821 1.72316  3.94091  9.76</span></span>
<span><span class="co">#&gt; [17,]  75 0.09764 0.500 0.39240 0.28553 0.11204 1.14754  2.21775  7.77</span></span>
<span><span class="co">#&gt; [18,]  80 0.13804 0.500 0.51313 0.17349 0.08902 0.64489  1.07021  6.17</span></span>
<span><span class="co">#&gt; [19,]  85 0.19859 5.035 1.00000 0.08447 0.08447 0.42532  0.42532  5.04</span></span></code></pre></div>
<p>Note, from life table one can compute other <em>functions</em> (not
just <span class="math inline">\(e_x\)</span> or <span class="math inline">\(l_x\)</span>):<br>
1. <span class="math inline">\(CDR = \frac{1}{e_0}\)</span> or Death
rate above some age <span class="math inline">\(x:
\frac{1}{e_x}\)</span>.<br>
2. Probability of surviving from age <span class="math inline">\(x\)</span> to age <span class="math inline">\(y\)</span>: <span class="math inline">\(p=\frac{l_y}{l_x}\)</span>.<br>
3. Probability that a newborn will die between ages <span class="math inline">\(x\)</span> and <span class="math inline">\(x+n\)</span>: <span class="math inline">\(\frac{d_x^n}{l_0}\)</span>.<br>
4. Probability that a newborn will die between ages <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span>: <span class="math inline">\(\frac{l_x-l_y}{l_0}\)</span>.<br>
5. Life course ratio from age <span class="math inline">\(x\)</span> to
<span class="math inline">\(y\)</span> that is the fraction of
person-years lived from age <span class="math inline">\(x\)</span>
onward: <span class="math inline">\(\frac{T_y}{T_x}\)</span>.</p>
</div>
<div class="section level3">
<h3 id="human-life-indicator-hli">Human Life Indicator (HLI)<a class="anchor" aria-label="anchor" href="#human-life-indicator-hli"></a>
</h3>
<p>A good alternative to the <em>human development indicator</em> (HDI)
is the <em>human life indicator</em> (HLI) proposed by Ghislandi,
Sanderson and Scherbov (<a href="https://doi.org/10.1111/padr.12205" class="external-link">2019</a>). It requires just
<span class="math inline">\(m_x\)</span> (and it is based on <em>life
table</em>). Lets calculate it using our example data:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/hli.html">hli</a></span><span class="op">(</span></span>
<span>  age <span class="op">=</span> <span class="va">rus2010</span><span class="op">$</span><span class="va">age</span>, </span>
<span>  sex <span class="op">=</span> <span class="st">"m"</span>, </span>
<span>  mx <span class="op">=</span> <span class="va">rus2010</span><span class="op">$</span><span class="va">mx</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 55.19236</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="years-of-life-lost-yll">Years of Life Lost (YLL)<a class="anchor" aria-label="anchor" href="#years-of-life-lost-yll"></a>
</h3>
<p>One of the most popular (and relatively young) measure of
<em>lifespan inequality</em> is “<em>years of life lost</em>” (YLL)
proposed by Martinez et al. (<a href="https://doi.org/10.1093/ije/dyy254" class="external-link">2019</a>). As authors claim,
“YLL is a valuable measure for public health surveillance, particularly
for quantifying the level and trends of premature mortality,
identification of leading causes of premature deaths and monitoring the
progress of YLL as a key indicator of population health” (ibid.,
1368).</p>
<p>Authors proposed different metrics of <em>YLL</em>:<br>
1. Absolute number of <em>YLL</em>: <span class="math display">\[YLL_{x,t,c}=D_{x,t,c}*SLE_x\]</span> that is
calculated for age <em>x</em>, time <em>t</em> and cause of death
<em>c</em>. <em>YLL</em> for the whole population is just sum of <span class="math inline">\(YLL_x\)</span>. <em>SLE</em> is the <em>standard
life expectancy</em> that is invariant over time, sex and population
(it’s meaning is straightforward: it is the potential maximum life span
of an individual, who is not exposed to avoidable health risks or severe
injuries and receives appropriate health services), and <span class="math inline">\(D_x\)</span> is a number of deaths at age
<em>x</em>. Of course, one can calculate <em>YLL</em> not for specific
cause <em>c</em>, but for overall mortality that is called
<em>all-causes YLL</em>.<br>
2. <em>YLL</em> as proportion: <span class="math display">\[YLL^p_{x,t,c}=YLL_{x,t,c}/YLL_{x,t}\]</span> that
is just <em>cause specific YLL</em> divided by <em>all-causes
YLL</em>.<br>
3. <em>YLL</em> rate: <span class="math display">\[YLL^r_{x,t,c}=[YLL_{x,t,c}/P_{x,t}] *
100'000\]</span> where <span class="math inline">\(P_{x,t}\)</span>
is population.<br>
4. Age-standardized <em>YLL</em> rate: <span class="math display">\[ASYR_{x,t,c} =
\sum_x^\omega{[YLL^r_{x,t,c}*W_x]}\]</span> where <span class="math inline">\(W_x\)</span> is the standard population weight at
age <em>x</em>, where <span class="math inline">\(\omega\)</span> is the
oldest, closing age (for ex., 85+ or 100+). In other words, it’s just
direct standardization of <span class="math inline">\(YLL^r_{x,t,c}\)</span>.</p>
<p>Let’s calculate all-cause <em>YLL</em>, <em>Yll rate</em> and
<em>ASYR</em> using Rosbris data that we have downloaded.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#YLL</span></span>
<span><span class="fu"><a href="../reference/yll.html">yll</a></span><span class="op">(</span><span class="va">rus2010</span><span class="op">$</span><span class="va">Dx</span>, type <span class="op">=</span> <span class="st">"yll"</span><span class="op">)</span></span>
<span><span class="co">#&gt; $yll_all</span></span>
<span><span class="co">#&gt; [1] 33640561</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $yll</span></span>
<span><span class="co">#&gt;  [1]  705159.2  174024.0  108414.6  104611.4  384855.2 1096994.4 1741367.9</span></span>
<span><span class="co">#&gt;  [8] 2190511.0 2157177.1 2171936.4 3075902.7 3860081.6 3989475.5 3502545.3</span></span>
<span><span class="co">#&gt; [15] 2002623.9 3063221.5 1729131.5 1233349.3  349178.1</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#YLL rate</span></span>
<span><span class="fu"><a href="../reference/yll.html">yll</a></span><span class="op">(</span><span class="va">rus2010</span><span class="op">$</span><span class="va">Dx</span>, type <span class="op">=</span> <span class="st">"yll.r"</span>, pop <span class="op">=</span> <span class="va">rus2010</span><span class="op">$</span><span class="va">N</span><span class="op">)</span></span>
<span><span class="co">#&gt; $yll.r_all</span></span>
<span><span class="co">#&gt; [1] 50945.02</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $yll.r</span></span>
<span><span class="co">#&gt;  [1]  81109.836   5400.365   3000.453   3077.806   8840.451  17712.527</span></span>
<span><span class="co">#&gt;  [7]  29011.861  40596.105  43375.182  48645.890  59839.275  74119.462</span></span>
<span><span class="co">#&gt; [13]  92058.751 112357.578 127258.833 142480.124 160414.307 172691.796</span></span>
<span><span class="co">#&gt; [19] 150930.678</span></span></code></pre></div>
<p>For <em>ASYR</em> one needs standard population. Let’s use 2010
population as standard (note, in this case <em>ASYR</em> equals <em>YLL
rate</em> because we use 2010 mortality).</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#ASYR</span></span>
<span><span class="fu"><a href="../reference/yll.html">yll</a></span><span class="op">(</span><span class="va">rus2010</span><span class="op">$</span><span class="va">Dx</span>, type <span class="op">=</span> <span class="st">"asyr"</span>, pop <span class="op">=</span> <span class="va">rus2010</span><span class="op">$</span><span class="va">N</span>, w <span class="op">=</span> <span class="va">rus2010</span><span class="op">$</span><span class="va">N</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">rus2010</span><span class="op">$</span><span class="va">N</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; $asyr</span></span>
<span><span class="co">#&gt;  [1] 1067.8879  263.5407  164.1824  158.4227  582.8220 1661.2803 2637.1149</span></span>
<span><span class="co">#&gt;  [8] 3317.2939 3266.8132 3289.1646 4658.1245 5845.6793 6041.6326 5304.2289</span></span>
<span><span class="co">#&gt; [15] 3032.7590 4638.9202 2618.5841 1867.7751  528.7928</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $asyr_all</span></span>
<span><span class="co">#&gt; [1] 50945.02</span></span></code></pre></div>
<p>Also one can calculate different <em>YLL</em> measures using
standards that are provided by <code>demor</code> as dataframe.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">demor</span><span class="fu">::</span><span class="va"><a href="../reference/sle_stand.html">sle_stand</a></span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="age-decomposition-of-differences-in-life-expectancies">Age decomposition of differences in life expectancies<a class="anchor" aria-label="anchor" href="#age-decomposition-of-differences-in-life-expectancies"></a>
</h3>
<p>Also one can do simple <em>decomposition</em> between 2 populations.
Lets use Russia-2000 as <em>base population</em> and Russia-2010 as
<em>compared population</em></p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rus2010</span> <span class="op">&lt;-</span> <span class="va">dbm</span><span class="op">[</span><span class="va">dbm</span><span class="op">$</span><span class="va">year</span><span class="op">==</span><span class="fl">2010</span> <span class="op">&amp;</span> <span class="va">dbm</span><span class="op">$</span><span class="va">code</span><span class="op">==</span><span class="fl">1100</span> <span class="op">&amp;</span> <span class="va">dbm</span><span class="op">$</span><span class="va">sex</span><span class="op">==</span><span class="st">"m"</span> <span class="op">&amp;</span> <span class="va">dbm</span><span class="op">$</span><span class="va">territory</span><span class="op">==</span><span class="st">"t"</span>,<span class="op">]</span></span>
<span><span class="va">rus2000</span> <span class="op">&lt;-</span> <span class="va">dbm</span><span class="op">[</span><span class="va">dbm</span><span class="op">$</span><span class="va">year</span><span class="op">==</span><span class="fl">2000</span> <span class="op">&amp;</span> <span class="va">dbm</span><span class="op">$</span><span class="va">code</span><span class="op">==</span><span class="fl">1100</span> <span class="op">&amp;</span> <span class="va">dbm</span><span class="op">$</span><span class="va">sex</span><span class="op">==</span><span class="st">"m"</span> <span class="op">&amp;</span> <span class="va">dbm</span><span class="op">$</span><span class="va">territory</span><span class="op">==</span><span class="st">"t"</span>,<span class="op">]</span></span>
<span></span>
<span><span class="va">dec</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/decomp.html">decomp</a></span><span class="op">(</span>mx1 <span class="op">=</span> <span class="va">rus2000</span><span class="op">$</span><span class="va">mx</span>, </span>
<span>              mx2 <span class="op">=</span> <span class="va">rus2010</span><span class="op">$</span><span class="va">mx</span>, </span>
<span>              sex <span class="op">=</span> <span class="st">"m"</span>, </span>
<span>              age <span class="op">=</span> <span class="va">rus2000</span><span class="op">$</span><span class="va">age</span>, </span>
<span>              method <span class="op">=</span> <span class="st">"andreev"</span><span class="op">)</span></span>
<span><span class="va">dec</span></span>
<span><span class="co">#&gt;    age   ex1   ex2     lx2  dex ex12   ex12_prc</span></span>
<span><span class="co">#&gt; 1    0 58.98 63.03 1.00000 4.05 0.53 13.0221130</span></span>
<span><span class="co">#&gt; 2    1 59.04 62.59 0.99124 3.55 0.11  2.7027027</span></span>
<span><span class="co">#&gt; 3    5 55.29 58.74 0.98885 3.45 0.07  1.7199017</span></span>
<span><span class="co">#&gt; 4   10 50.45 53.84 0.98710 3.39 0.05  1.2285012</span></span>
<span><span class="co">#&gt; 5   15 45.59 48.94 0.98519 3.35 0.21  5.1597052</span></span>
<span><span class="co">#&gt; 6   20 41.05 44.21 0.97937 3.16 0.45 11.0565111</span></span>
<span><span class="co">#&gt; 7   25 37.01 39.75 0.96698 2.74 0.26  6.3882064</span></span>
<span><span class="co">#&gt; 8   30 33.06 35.59 0.94550 2.53 0.03  0.7371007</span></span>
<span><span class="co">#&gt; 9   35 29.15 31.74 0.91386 2.59 0.15  3.6855037</span></span>
<span><span class="co">#&gt; 10  40 25.40 27.92 0.87831 2.52 0.29  7.1253071</span></span>
<span><span class="co">#&gt; 11  45 21.90 24.20 0.83638 2.30 0.37  9.0909091</span></span>
<span><span class="co">#&gt; 12  50 18.71 20.70 0.78234 1.99 0.38  9.3366093</span></span>
<span><span class="co">#&gt; 13  55 15.82 17.47 0.71293 1.65 0.34  8.3538084</span></span>
<span><span class="co">#&gt; 14  60 13.24 14.57 0.62512 1.33 0.26  6.3882064</span></span>
<span><span class="co">#&gt; 15  65 10.93 12.04 0.51889 1.11 0.22  5.4054054</span></span>
<span><span class="co">#&gt; 16  70  8.88  9.76 0.40374 0.88 0.17  4.1769042</span></span>
<span><span class="co">#&gt; 17  75  7.12  7.77 0.28553 0.65 0.06  1.4742015</span></span>
<span><span class="co">#&gt; 18  80  5.47  6.17 0.17349 0.70 0.05  1.2285012</span></span>
<span><span class="co">#&gt; 19  85  4.16  5.04 0.08447 0.88 0.07  1.7199017</span></span></code></pre></div>
<p>Than let us plot the result of <code>decomp</code> using R basic
plot.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/barplot.html" class="external-link">barplot</a></span><span class="op">(</span>height<span class="op">=</span><span class="va">dec</span><span class="op">$</span><span class="va">ex12</span>, </span>
<span>        names<span class="op">=</span><span class="va">dec</span><span class="op">$</span><span class="va">age</span>,</span>
<span>        xlab<span class="op">=</span><span class="st">"Age-groups"</span>, </span>
<span>        ylab<span class="op">=</span><span class="st">"Сontribution to the e0 difference"</span><span class="op">)</span></span></code></pre></div>
<p><img src="demor_files/figure-html/unnamed-chunk-10-1.png" width="100%"></p>
<p>Or using <code>ggplot2</code></p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">dec</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">age</span><span class="op">)</span>, <span class="va">ex12</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span>, color <span class="op">=</span> <span class="st">"black"</span>, fill <span class="op">=</span> <span class="st">"orange3"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Age-groups"</span>, </span>
<span>       y <span class="op">=</span> <span class="st">"Сontribution to the e0 difference"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html" class="external-link">annotate</a></span><span class="op">(</span><span class="st">"text"</span>, x <span class="op">=</span> <span class="st">"70"</span>, y <span class="op">=</span> <span class="fl">0.5</span>, label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"Total difference in e0: "</span>, <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">dec</span><span class="op">$</span><span class="va">ex12</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">ex12</span><span class="op">)</span>, vjust <span class="op">=</span> <span class="fl">1.5</span>, color <span class="op">=</span> <span class="st">"white"</span>, size <span class="op">=</span> <span class="fl">3.5</span><span class="op">)</span></span></code></pre></div>
<p><img src="demor_files/figure-html/unnamed-chunk-11-1.png" width="100%"></p>
</div>
<div class="section level3">
<h3 id="age-and-cause-decomposition-of-differences-in-life-expectancies">Age and cause decomposition of differences in life expectancies<a class="anchor" aria-label="anchor" href="#age-and-cause-decomposition-of-differences-in-life-expectancies"></a>
</h3>
<p>Also one can do <em>decomposition</em> between 2 populations by
<em>age</em> and <em>causes</em>. Lets use example from Andreev &amp;
Shkolnikov <a href="https://www.demogr.mpg.de/en/publications_databases_6118/publications_1904/mpidr_technical_reports/an_excel_spreadsheet_for_the_decomposition_of_a_difference_between_two_values_of_an_aggregate_demographic_4591" class="external-link">spreadsheet</a>
where data for US and England and Wales men mortality by some causes are
presented.<br>
Lets see the data</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"mdecompex"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">mdecompex</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 9</span></span></span>
<span><span class="co">#&gt;     age neoplasms circulatory respiratory  digestive  accident     other     all</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     0 0.000<span style="text-decoration: underline;">034</span>9  0.000<span style="text-decoration: underline;">173</span>    0.000<span style="text-decoration: underline;">188</span>   0.000<span style="text-decoration: underline;">151</span>   0.000<span style="text-decoration: underline;">377</span>  0.006<span style="text-decoration: underline;">69</span>   7.62<span style="color: #949494;">e</span><span style="color: #BB0000;">-3</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     1 0.000<span style="text-decoration: underline;">030</span>9  0.000<span style="text-decoration: underline;">015</span>5   0.000<span style="text-decoration: underline;">022</span>0  0.000<span style="text-decoration: underline;">009</span>30 0.000<span style="text-decoration: underline;">163</span>  0.000<span style="text-decoration: underline;">112</span>  3.53<span style="color: #949494;">e</span><span style="color: #BB0000;">-4</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>     5 0.000<span style="text-decoration: underline;">031</span>3  0.000<span style="text-decoration: underline;">005</span>60  0.000<span style="text-decoration: underline;">006</span>87 0.000<span style="text-decoration: underline;">003</span>24 0.000<span style="text-decoration: underline;">079</span>2 0.000<span style="text-decoration: underline;">040</span>9 1.67<span style="color: #949494;">e</span><span style="color: #BB0000;">-4</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>    10 0.000<span style="text-decoration: underline;">030</span>5  0.000<span style="text-decoration: underline;">012</span>7   0.000<span style="text-decoration: underline;">008</span>96 0.000<span style="text-decoration: underline;">002</span>86 0.000<span style="text-decoration: underline;">127</span>  0.000<span style="text-decoration: underline;">049</span>0 2.31<span style="color: #949494;">e</span><span style="color: #BB0000;">-4</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>    15 0.000<span style="text-decoration: underline;">042</span>4  0.000<span style="text-decoration: underline;">032</span>2   0.000<span style="text-decoration: underline;">014</span>1  0.000<span style="text-decoration: underline;">004</span>01 0.000<span style="text-decoration: underline;">765</span>  0.000<span style="text-decoration: underline;">082</span>1 9.40<span style="color: #949494;">e</span><span style="color: #BB0000;">-4</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>    20 0.000<span style="text-decoration: underline;">060</span>0  0.000<span style="text-decoration: underline;">051</span>1   0.000<span style="text-decoration: underline;">015</span>8  0.000<span style="text-decoration: underline;">009</span>28 0.001<span style="text-decoration: underline;">14</span>   0.000<span style="text-decoration: underline;">130</span>  1.41<span style="color: #949494;">e</span><span style="color: #BB0000;">-3</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: cnt &lt;chr&gt;</span></span></span></code></pre></div>
<p>For <code>mdecomp</code> 2 lists with arrays for 2 population are
required.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#US men</span></span>
<span><span class="va">mx1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>all <span class="op">=</span> <span class="va">mdecompex</span><span class="op">[</span><span class="va">mdecompex</span><span class="op">$</span><span class="va">cnt</span><span class="op">==</span><span class="st">"usa"</span>,<span class="op">]</span><span class="op">$</span><span class="va">all</span>, </span>
<span>            neoplasm <span class="op">=</span> <span class="va">mdecompex</span><span class="op">[</span><span class="va">mdecompex</span><span class="op">$</span><span class="va">cnt</span><span class="op">==</span><span class="st">"usa"</span>,<span class="op">]</span><span class="op">$</span><span class="va">neoplasms</span>, </span>
<span>            circulatory <span class="op">=</span> <span class="va">mdecompex</span><span class="op">[</span><span class="va">mdecompex</span><span class="op">$</span><span class="va">cnt</span><span class="op">==</span><span class="st">"usa"</span>,<span class="op">]</span><span class="op">$</span><span class="va">circulatory</span>, </span>
<span>            respiratory <span class="op">=</span> <span class="va">mdecompex</span><span class="op">[</span><span class="va">mdecompex</span><span class="op">$</span><span class="va">cnt</span><span class="op">==</span><span class="st">"usa"</span>,<span class="op">]</span><span class="op">$</span><span class="va">respiratory</span>,</span>
<span>            digestive <span class="op">=</span> <span class="va">mdecompex</span><span class="op">[</span><span class="va">mdecompex</span><span class="op">$</span><span class="va">cnt</span><span class="op">==</span><span class="st">"usa"</span>,<span class="op">]</span><span class="op">$</span><span class="va">digestive</span>,</span>
<span>            accident <span class="op">=</span> <span class="va">mdecompex</span><span class="op">[</span><span class="va">mdecompex</span><span class="op">$</span><span class="va">cnt</span><span class="op">==</span><span class="st">"usa"</span>,<span class="op">]</span><span class="op">$</span><span class="va">accident</span>,</span>
<span>            other <span class="op">=</span> <span class="va">mdecompex</span><span class="op">[</span><span class="va">mdecompex</span><span class="op">$</span><span class="va">cnt</span><span class="op">==</span><span class="st">"usa"</span>,<span class="op">]</span><span class="op">$</span><span class="va">other</span><span class="op">)</span></span>
<span><span class="co">#England and Wales men</span></span>
<span><span class="va">mx2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>all <span class="op">=</span> <span class="va">mdecompex</span><span class="op">[</span><span class="va">mdecompex</span><span class="op">$</span><span class="va">cnt</span><span class="op">==</span><span class="st">"eng"</span>,<span class="op">]</span><span class="op">$</span><span class="va">all</span>, </span>
<span>            neoplasm <span class="op">=</span> <span class="va">mdecompex</span><span class="op">[</span><span class="va">mdecompex</span><span class="op">$</span><span class="va">cnt</span><span class="op">==</span><span class="st">"eng"</span>,<span class="op">]</span><span class="op">$</span><span class="va">neoplasms</span>, </span>
<span>            circulatory <span class="op">=</span> <span class="va">mdecompex</span><span class="op">[</span><span class="va">mdecompex</span><span class="op">$</span><span class="va">cnt</span><span class="op">==</span><span class="st">"eng"</span>,<span class="op">]</span><span class="op">$</span><span class="va">circulatory</span>, </span>
<span>            respiratory <span class="op">=</span> <span class="va">mdecompex</span><span class="op">[</span><span class="va">mdecompex</span><span class="op">$</span><span class="va">cnt</span><span class="op">==</span><span class="st">"eng"</span>,<span class="op">]</span><span class="op">$</span><span class="va">respiratory</span>,</span>
<span>            digestive <span class="op">=</span> <span class="va">mdecompex</span><span class="op">[</span><span class="va">mdecompex</span><span class="op">$</span><span class="va">cnt</span><span class="op">==</span><span class="st">"eng"</span>,<span class="op">]</span><span class="op">$</span><span class="va">digestive</span>,</span>
<span>            accident <span class="op">=</span> <span class="va">mdecompex</span><span class="op">[</span><span class="va">mdecompex</span><span class="op">$</span><span class="va">cnt</span><span class="op">==</span><span class="st">"eng"</span>,<span class="op">]</span><span class="op">$</span><span class="va">accident</span>,</span>
<span>            other <span class="op">=</span> <span class="va">mdecompex</span><span class="op">[</span><span class="va">mdecompex</span><span class="op">$</span><span class="va">cnt</span><span class="op">==</span><span class="st">"eng"</span>,<span class="op">]</span><span class="op">$</span><span class="va">other</span><span class="op">)</span></span>
<span></span>
<span><span class="va">decm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mdecomp.html">mdecomp</a></span><span class="op">(</span>mx1 <span class="op">=</span> <span class="va">mx1</span>, </span>
<span>              mx2 <span class="op">=</span> <span class="va">mx2</span>, </span>
<span>              sex <span class="op">=</span> <span class="st">"m"</span>, </span>
<span>              age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">mdecompex</span><span class="op">$</span><span class="va">age</span><span class="op">)</span></span>
<span>              <span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">decm</span><span class="op">)</span></span>
<span><span class="co">#&gt;   age ex12      neoplasm  circulatory   respiratory     digestive   accident</span></span>
<span><span class="co">#&gt; 1   0 0.12  0.0008745885 6.544742e-03  0.0038965543  6.616401e-03 0.02107294</span></span>
<span><span class="co">#&gt; 2   1 0.03 -0.0025030458 5.483996e-04  0.0020247182  6.245908e-04 0.03637029</span></span>
<span><span class="co">#&gt; 3   5 0.02 -0.0016468368 8.262058e-05 -0.0001300012  9.929857e-05 0.02178479</span></span>
<span><span class="co">#&gt; 4  10 0.01 -0.0014084238 4.993427e-04 -0.0002451017  8.338450e-05 0.01117647</span></span>
<span><span class="co">#&gt; 5  15 0.13 -0.0032690840 2.657675e-03  0.0005053688 -2.052103e-04 0.13796276</span></span>
<span><span class="co">#&gt; 6  20 0.17 -0.0009648903 2.773336e-03 -0.0016773417 -8.983808e-04 0.18353643</span></span>
<span><span class="co">#&gt;           other</span></span>
<span><span class="co">#&gt; 1  0.0809947781</span></span>
<span><span class="co">#&gt; 2 -0.0070649563</span></span>
<span><span class="co">#&gt; 3 -0.0001898743</span></span>
<span><span class="co">#&gt; 4 -0.0001056675</span></span>
<span><span class="co">#&gt; 5 -0.0076515085</span></span>
<span><span class="co">#&gt; 6 -0.0127691565</span></span></code></pre></div>
<p>Than let us plot the result of <code>mdecomp</code> using <a href="https://github.com/tidyverse/ggplot2" class="external-link">ggplot2</a>. This requires
some data transformations</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">decm_plot</span> <span class="op">&lt;-</span> <span class="va">decm</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">3</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">decm_plot</span><span class="op">$</span><span class="va">group</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">decm</span><span class="op">)</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">decm_plot</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">&lt;-</span><span class="st">"ex12"</span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">4</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">decm</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">decm_plot_i</span> <span class="op">&lt;-</span> <span class="va">decm</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="va">i</span><span class="op">)</span><span class="op">]</span></span>
<span>  <span class="va">decm_plot_i</span><span class="op">$</span><span class="va">group</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">decm</span><span class="op">)</span><span class="op">[</span><span class="va">i</span><span class="op">]</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">decm_plot_i</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">&lt;-</span><span class="st">"ex12"</span></span>
<span>  <span class="va">decm_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">decm_plot</span>,<span class="va">decm_plot_i</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">decm_plot_i</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">decm_plot</span><span class="op">$</span><span class="va">group</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">decm_plot</span><span class="op">[</span><span class="va">decm_plot</span><span class="op">$</span><span class="va">group</span><span class="op">==</span><span class="va">i</span>,<span class="op">]</span><span class="op">$</span><span class="va">group</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">i</span>, <span class="st">" ("</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">decm_plot</span><span class="op">[</span><span class="va">decm_plot</span><span class="op">$</span><span class="va">group</span><span class="op">==</span><span class="va">i</span>,<span class="op">]</span><span class="op">$</span><span class="va">ex12</span><span class="op">)</span>,<span class="fl">2</span><span class="op">)</span>, <span class="st">")"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">decm_plot</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">age</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">ex12</span>, fill <span class="op">=</span> <span class="va">group</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar</a></span><span class="op">(</span>stat<span class="op">=</span><span class="st">"identity"</span>, colour <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html" class="external-link">scale_fill_brewer</a></span><span class="op">(</span>palette<span class="op">=</span><span class="st">"Set1"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Age"</span>, y <span class="op">=</span> <span class="st">"Contribution to difference in ex"</span>, fill <span class="op">=</span> <span class="st">"Cause (contribution):"</span>, </span>
<span>       caption  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"Total difference in ex = "</span>, <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">decm</span><span class="op">[</span>,<span class="fl">2</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span>       <span class="op">)</span></span></code></pre></div>
<p><img src="demor_files/figure-html/unnamed-chunk-14-1.png" width="100%"></p>
</div>
<div class="section level3">
<h3 id="lee-carter-model">Lee-Carter model<a class="anchor" aria-label="anchor" href="#lee-carter-model"></a>
</h3>
<p>Also in the <code>demor</code> there is <code><a href="../reference/leecart.html">leecart()</a></code>
function that provides users with basic <em>Lee-Carter model</em>
(proposed by Lee and Carter in 1992 and that now has a lot of
extensions) for mortality forecasting:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">leecart_forecast</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/leecart.html">leecart</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dbm</span><span class="op">[</span><span class="va">dbm</span><span class="op">$</span><span class="va">code</span><span class="op">==</span><span class="fl">1100</span> <span class="op">&amp;</span> <span class="va">dbm</span><span class="op">$</span><span class="va">territory</span><span class="op">==</span><span class="st">"t"</span> <span class="op">&amp;</span> <span class="va">dbm</span><span class="op">$</span><span class="va">sex</span><span class="op">==</span><span class="st">"m"</span> <span class="op">&amp;</span> <span class="va">dbm</span><span class="op">$</span><span class="va">year</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fl">2004</span><span class="op">:</span><span class="fl">2019</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"year"</span>, <span class="st">"age"</span>, <span class="st">"mx"</span><span class="op">)</span><span class="op">]</span>, </span>
<span>                            n <span class="op">=</span> <span class="fl">10</span>, </span>
<span>                            sex <span class="op">=</span> <span class="st">"m"</span>, </span>
<span>                            concise <span class="op">=</span> <span class="cn">T</span></span>
<span>                            <span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">leecart_forecast</span><span class="op">)</span></span>
<span><span class="co">#&gt;   year age           mx     mx_low95    mx_high95    ex ex_low95 ex_high95</span></span>
<span><span class="co">#&gt; 1 2020   0 0.0052050868 0.0049297552 0.0054957958 68.54    67.99     69.08</span></span>
<span><span class="co">#&gt; 2 2020   1 0.0003032973 0.0002852915 0.0003224396 67.89    67.36     68.42</span></span>
<span><span class="co">#&gt; 3 2020  10 0.0002669130 0.0002568045 0.0002774194 63.97    63.45     64.50</span></span>
<span><span class="co">#&gt; 4 2020  15 0.0007304609 0.0006953816 0.0007673099 59.06    58.53     59.58</span></span>
<span><span class="co">#&gt; 5 2020  20 0.0013011257 0.0012188971 0.0013889016 54.26    53.75     54.78</span></span>
<span><span class="co">#&gt; 6 2020  25 0.0019688556 0.0018300568 0.0021181815 49.60    49.10     50.10</span></span></code></pre></div>
<p>One can plot the results using <a href="https://github.com/tidyverse/ggplot2" class="external-link">ggplot2</a>:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">leecart_forecast</span><span class="op">[</span><span class="va">leecart_forecast</span><span class="op">$</span><span class="va">age</span><span class="op">==</span><span class="st">"0"</span>,<span class="op">]</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">ex</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html" class="external-link">geom_ribbon</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>ymin <span class="op">=</span> <span class="va">ex_low95</span>, ymax <span class="op">=</span> <span class="va">ex_high95</span><span class="op">)</span>, alpha <span class="op">=</span> <span class="fl">0.3</span>, fill <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="demor_files/figure-html/unnamed-chunk-16-1.png" width="100%"></p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">leecart_forecast</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">age</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log10</a></span><span class="op">(</span><span class="va">mx</span><span class="op">)</span>, color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html" class="external-link">geom_ribbon</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>ymin <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log10</a></span><span class="op">(</span><span class="va">mx_low95</span><span class="op">)</span>, ymax <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log10</a></span><span class="op">(</span><span class="va">mx_high95</span><span class="op">)</span><span class="op">)</span>, alpha <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="demor_files/figure-html/unnamed-chunk-16-2.png" width="100%"></p>
</div>
<div class="section level3">
<h3 id="associated-single-decrement-life-table">Associated single decrement life table<a class="anchor" aria-label="anchor" href="#associated-single-decrement-life-table"></a>
</h3>
<p>There is <code><a href="../reference/asdt.html">asdt()</a></code> function that calculates <em>associated
single decrement life table</em> (ASDT) for causes of death
(<em>cause-deleted life table</em>). In other words, by this function
one can answer the question “what will be the life expectancy if there
is no mortality from cause i?”<br>
For example in the <code>demor</code> data (as it is easy to guess,
taken from Andreev &amp; Shkolnikov <a href="https://www.demogr.mpg.de/en/publications_databases_6118/publications_1904/mpidr_technical_reports/an_excel_spreadsheet_for_the_decomposition_of_a_difference_between_two_values_of_an_aggregate_demographic_4591" class="external-link">spreadsheet</a>)
on mortality of US men in 2002 by some causes is added. Let me show what
would be <span class="math inline">\(e_x\)</span> if there is no deaths
from neoplasm (i)</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"asdtex"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">asdt_neoplasm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/asdt.html">asdt</a></span><span class="op">(</span>age <span class="op">=</span> <span class="va">asdtex</span><span class="op">$</span><span class="va">age</span>, </span>
<span>                      sex <span class="op">=</span> <span class="st">"m"</span>,</span>
<span>                      m_all <span class="op">=</span> <span class="va">asdtex</span><span class="op">$</span><span class="va">all</span>, </span>
<span>                      m_i <span class="op">=</span> <span class="va">asdtex</span><span class="op">$</span><span class="va">neoplasms</span>, </span>
<span>                      full <span class="op">=</span> <span class="cn">F</span>, </span>
<span>                      method <span class="op">=</span> <span class="st">"chiang1968"</span><span class="op">)</span></span>
<span><span class="va">asdt_neoplasm</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"ex"</span>, <span class="st">"ex_without_i"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt;    age    ex ex_without_i</span></span>
<span><span class="co">#&gt; 1    0 74.65        78.58</span></span>
<span><span class="co">#&gt; 2    1 74.22        78.18</span></span>
<span><span class="co">#&gt; 3    5 70.32        74.28</span></span>
<span><span class="co">#&gt; 4   10 65.38        69.33</span></span>
<span><span class="co">#&gt; 5   15 60.45        64.39</span></span>
<span><span class="co">#&gt; 6   20 55.72        59.67</span></span>
<span><span class="co">#&gt; 7   25 51.10        55.06</span></span>
<span><span class="co">#&gt; 8   30 46.43        50.39</span></span>
<span><span class="co">#&gt; 9   35 41.75        45.72</span></span>
<span><span class="co">#&gt; 10  40 37.16        41.13</span></span>
<span><span class="co">#&gt; 11  45 32.70        36.64</span></span>
<span><span class="co">#&gt; 12  50 28.39        32.26</span></span>
<span><span class="co">#&gt; 13  55 24.25        27.98</span></span>
<span><span class="co">#&gt; 14  60 20.32        23.82</span></span>
<span><span class="co">#&gt; 15  65 16.69        19.84</span></span>
<span><span class="co">#&gt; 16  70 13.40        16.12</span></span>
<span><span class="co">#&gt; 17  75 10.51        12.75</span></span>
<span><span class="co">#&gt; 18  80  8.07         9.81</span></span>
<span><span class="co">#&gt; 19  85  6.15         7.32</span></span></code></pre></div>
<p>One can plot the results using <a href="https://github.com/tidyverse/ggplot2" class="external-link">ggplot2</a>:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">asdt_neoplasm</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">ex</span>, color <span class="op">=</span> <span class="st">"ex"</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">ex_without_i</span>, color <span class="op">=</span> <span class="st">"ex without neoplasms"</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="demor_files/figure-html/unnamed-chunk-18-1.png" width="100%"></p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">asdt_neoplasm</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">lx</span>, color <span class="op">=</span> <span class="st">"ex"</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">l_not_i</span>, color <span class="op">=</span> <span class="st">"ex without neoplasms"</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">0.5</span>, linetype <span class="op">=</span> <span class="st">"dashed"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="demor_files/figure-html/unnamed-chunk-18-2.png" width="100%"></p>
</div>
</div>
<div class="section level2">
<h2 id="fertility">Fertility<a class="anchor" aria-label="anchor" href="#fertility"></a>
</h2>
<p>For the analysis of fertility in the <code>demor</code> there are
only a few (1…) functions, due to the author’s preference for mortality
analysis…</p>
<div class="section level3">
<h3 id="tfr">TFR<a class="anchor" aria-label="anchor" href="#tfr"></a>
</h3>
<p>Lets get basic <em>fertility data</em> (asFR or <span class="math inline">\(f_x\)</span>) from <a href="http://demogr.nes.ru/index.php/ru/demogr_indicat/data" class="external-link">RosBris</a>
using <code><a href="../reference/get_rosbris.html">get_rosbris()</a></code></p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dbf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_rosbris.html">get_rosbris</a></span><span class="op">(</span></span>
<span>  <span class="co">#fertility data</span></span>
<span>  type <span class="op">=</span> <span class="st">"f"</span>,</span>
<span>  <span class="co">#what age group download</span></span>
<span>  age <span class="op">=</span>  <span class="fl">5</span>,</span>
<span>  <span class="co">#to get "long" data</span></span>
<span>  initial <span class="op">=</span> <span class="cn">F</span>,</span>
<span>  <span class="co">#last available year</span></span>
<span>  lastyear <span class="op">=</span> <span class="fl">2022</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>For the example Russia-2010 is gotten</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rus2010f</span> <span class="op">&lt;-</span> <span class="va">dbf</span><span class="op">[</span><span class="va">dbf</span><span class="op">$</span><span class="va">year</span><span class="op">==</span><span class="fl">2010</span> <span class="op">&amp;</span> <span class="va">dbf</span><span class="op">$</span><span class="va">code</span><span class="op">==</span><span class="fl">1100</span> <span class="op">&amp;</span> <span class="va">dbf</span><span class="op">$</span><span class="va">territory</span><span class="op">==</span><span class="st">"t"</span>,<span class="op">]</span></span>
<span><span class="va">rus2010f</span></span>
<span><span class="co">#&gt;      year code territory age       fx       N        Bx</span></span>
<span><span class="co">#&gt; 3153 2010 1100         t  15 0.027015 4214250 113847.96</span></span>
<span><span class="co">#&gt; 3154 2010 1100         t  20 0.087421 6027079 526893.27</span></span>
<span><span class="co">#&gt; 3155 2010 1100         t  25 0.099061 5957982 590203.65</span></span>
<span><span class="co">#&gt; 3156 2010 1100         t  30 0.067240 5515957 370892.95</span></span>
<span><span class="co">#&gt; 3157 2010 1100         t  35 0.029922 5187670 155225.46</span></span>
<span><span class="co">#&gt; 3158 2010 1100         t  40 0.005904 4764028  28126.82</span></span>
<span><span class="co">#&gt; 3159 2010 1100         t  45 0.000257 5738736   1474.86</span></span>
<span><span class="co">#&gt; 3160 2010 1100         t  50 0.000014 6203597     86.85</span></span></code></pre></div>
<p>Now one can compute <em>TFR</em>:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tfr.html">tfr</a></span><span class="op">(</span></span>
<span>  <span class="co">#asFR</span></span>
<span>  <span class="va">rus2010f</span><span class="op">$</span><span class="va">fx</span>,</span>
<span>  <span class="co">#age interval</span></span>
<span>  age.int <span class="op">=</span> <span class="fl">5</span></span>
<span>    <span class="op">)</span></span>
<span><span class="co">#&gt; [1] 1.58417</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="other-functions">Other functions<a class="anchor" aria-label="anchor" href="#other-functions"></a>
</h2>
<p>Also in the <code>demor</code> there are some additional
functions.<br>
One of them is <code>plot_pyr</code> that plots population pyramid using
<a href="https://github.com/tidyverse/ggplot2" class="external-link">ggplot2</a><br>
Lets create population pyramid using midyear population from Rosbris
mortality data. We already have data in <code>dbm</code>.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_pyr.html">plot_pyr</a></span><span class="op">(</span></span>
<span>  popm <span class="op">=</span> <span class="va">dbm</span><span class="op">[</span><span class="va">dbm</span><span class="op">$</span><span class="va">year</span><span class="op">==</span><span class="fl">2010</span> <span class="op">&amp;</span> <span class="va">dbm</span><span class="op">$</span><span class="va">code</span><span class="op">==</span><span class="fl">1100</span> <span class="op">&amp;</span> <span class="va">dbm</span><span class="op">$</span><span class="va">territory</span><span class="op">==</span><span class="st">"t"</span> <span class="op">&amp;</span> <span class="va">dbm</span><span class="op">$</span><span class="va">sex</span><span class="op">==</span><span class="st">"m"</span>,<span class="op">]</span><span class="op">$</span><span class="va">N</span>,</span>
<span>  popf <span class="op">=</span> <span class="va">dbm</span><span class="op">[</span><span class="va">dbm</span><span class="op">$</span><span class="va">year</span><span class="op">==</span><span class="fl">2010</span> <span class="op">&amp;</span> <span class="va">dbm</span><span class="op">$</span><span class="va">code</span><span class="op">==</span><span class="fl">1100</span> <span class="op">&amp;</span> <span class="va">dbm</span><span class="op">$</span><span class="va">territory</span><span class="op">==</span><span class="st">"t"</span> <span class="op">&amp;</span> <span class="va">dbm</span><span class="op">$</span><span class="va">sex</span><span class="op">==</span><span class="st">"f"</span>,<span class="op">]</span><span class="op">$</span><span class="va">N</span>, </span>
<span>  ages <span class="op">=</span> <span class="va">dbm</span><span class="op">[</span><span class="va">dbm</span><span class="op">$</span><span class="va">year</span><span class="op">==</span><span class="fl">2010</span> <span class="op">&amp;</span> <span class="va">dbm</span><span class="op">$</span><span class="va">code</span><span class="op">==</span><span class="fl">1100</span> <span class="op">&amp;</span> <span class="va">dbm</span><span class="op">$</span><span class="va">territory</span><span class="op">==</span><span class="st">"t"</span> <span class="op">&amp;</span> <span class="va">dbm</span><span class="op">$</span><span class="va">sex</span><span class="op">==</span><span class="st">"f"</span>,<span class="op">]</span><span class="op">$</span><span class="va">age</span><span class="op">)</span></span></code></pre></div>
<p><img src="demor_files/figure-html/unnamed-chunk-22-1.png" width="100%"></p>
<p>Also one can redesigned plot using <a href="https://github.com/tidyverse/ggplot2" class="external-link">ggplot2</a> functions:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plot</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="../reference/plot_pyr.html">plot_pyr</a></span><span class="op">(</span></span>
<span>  popm <span class="op">=</span> <span class="va">dbm</span><span class="op">[</span><span class="va">dbm</span><span class="op">$</span><span class="va">year</span><span class="op">==</span><span class="fl">2010</span> <span class="op">&amp;</span> <span class="va">dbm</span><span class="op">$</span><span class="va">code</span><span class="op">==</span><span class="fl">1100</span> <span class="op">&amp;</span> <span class="va">dbm</span><span class="op">$</span><span class="va">territory</span><span class="op">==</span><span class="st">"t"</span> <span class="op">&amp;</span> <span class="va">dbm</span><span class="op">$</span><span class="va">sex</span><span class="op">==</span><span class="st">"m"</span>,<span class="op">]</span><span class="op">$</span><span class="va">N</span>,</span>
<span>  popf <span class="op">=</span> <span class="va">dbm</span><span class="op">[</span><span class="va">dbm</span><span class="op">$</span><span class="va">year</span><span class="op">==</span><span class="fl">2010</span> <span class="op">&amp;</span> <span class="va">dbm</span><span class="op">$</span><span class="va">code</span><span class="op">==</span><span class="fl">1100</span> <span class="op">&amp;</span> <span class="va">dbm</span><span class="op">$</span><span class="va">territory</span><span class="op">==</span><span class="st">"t"</span> <span class="op">&amp;</span> <span class="va">dbm</span><span class="op">$</span><span class="va">sex</span><span class="op">==</span><span class="st">"f"</span>,<span class="op">]</span><span class="op">$</span><span class="va">N</span>, </span>
<span>  ages <span class="op">=</span> <span class="va">dbm</span><span class="op">[</span><span class="va">dbm</span><span class="op">$</span><span class="va">year</span><span class="op">==</span><span class="fl">2010</span> <span class="op">&amp;</span> <span class="va">dbm</span><span class="op">$</span><span class="va">code</span><span class="op">==</span><span class="fl">1100</span> <span class="op">&amp;</span> <span class="va">dbm</span><span class="op">$</span><span class="va">territory</span><span class="op">==</span><span class="st">"t"</span> <span class="op">&amp;</span> <span class="va">dbm</span><span class="op">$</span><span class="va">sex</span><span class="op">==</span><span class="st">"f"</span>,<span class="op">]</span><span class="op">$</span><span class="va">age</span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>y <span class="op">=</span> <span class="st">"My y"</span>, x <span class="op">=</span> <span class="st">"Age"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="demor_files/figure-html/unnamed-chunk-23-1.png" width="100%"></p>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<ul>
<li>Center for Demographic Research, Moscow (Russia). 2023. “Russian
Fertility and Mortality Database (Rosbris)” <a href="http://www.demogr.nes.ru/en/demogr_indicat/data" class="external-link">URL</a><br>
</li>
<li>Andreev, E. M., &amp; Kingkade, W. W. (2015). Average age at death
in infancy and infant mortality level: Reconsidering the Coale-Demeny
formulas at current levels of low mortality. Demographic Research, 33,
363-390.<br>
</li>
<li>Ghislandi, S., Sanderson, W. C., &amp; Scherbov, S. (2019). A simple
measure of human development: The human life indicator. Population and
development review, 45(1), 219.<br>
</li>
<li>Andreev, E. M., &amp; Shkolnikov, V. M. (2012). An Excel spreadsheet
for the decomposition of a difference between two values of an aggregate
demographic measure by stepwise replacement running from young to old
ages. MPIDR Technical Report TR-2012-002. <a href="https://www.demogr.mpg.de/en/publications_databases_6118/publications_1904/mpidr_technical_reports/an_excel_spreadsheet_for_the_decomposition_of_a_difference_between_two_values_of_an_aggregate_demographic_4591" class="external-link">URL</a><br>
</li>
<li>Lee, R. D., &amp; Carter, L. R. (1992). Modeling and forecasting US
mortality. Journal of the American statistical association, 87(419),
659-671.</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Vadim Ustyuzhanin.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
